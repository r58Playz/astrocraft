version: build{build}

image:

- Visual Studio 2019

- Ubuntu

for:
  -
    matrix:
      only:
        - image: Visual Studio 2019
    install:
      - cmd: >-
          C:/Python38/python.exe -m pip install cython pyglet msgpack plyer

          C:/Python38/python.exe -m pip install --upgrade git+https://github.com/anthony-tuininga/cx_Freeze.git@master
    build_script:
      - cmd: >-
          C:/Python38/python.exe setup.py build
    artifacts:
      - path: build
        name: windows
  -
    matrix:
      only:
        - image: Ubuntu
    install:
      - sh: >-
          python3.8 -m pip install cython pyglet msgpack plyer

          python3.8 -m pip install --upgrade git+https://github.com/anthony-tuininga/cx_Freeze.git@master
    build_script:
      - sh: >-
          python3.8 setup.py build
    artifacts:
      - path: build
        name: linux


deploy:

- provider: GitHub
  auth_token:
    secure: EUjNWRY9A/u08SfrYD9rqPmC8Ob3uy+1A5g0s6NOanIfn4EwFjDTc+TaC+qzVz8V
  repository: r58Playz/astrocraft-python
  artifact: linux, windows
  on:
    APPVEYOR_REPO_TAG_NAME: release


on_success:

- cmd: ''